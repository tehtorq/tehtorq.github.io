import{s as R,e as g,c as b,h as v,f,j as N,i as w,l as k,m as h,G as y,n as I,r as V,I as U,q as G,J as $,D as J,k as L,A as M,K as j,a as F,b as H,L as Q}from"../chunks/scheduler.4OklibGo.js";import{S as T,i as q,t as d,a as p,c as B,g as K,f as W,b as Y,d as Z,m as z,e as x}from"../chunks/index.N5WkootQ.js";function A(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function _(t){var e=new Error(t);return e.source="ulid",e}var E="0123456789ABCDEFGHJKMNPQRSTVWXYZ",m=E.length,C=Math.pow(2,48)-1,ee=10,te=16;function ne(t){var e=Math.floor(t()*m);return e===m&&(e=m-1),E.charAt(e)}function re(t,e){if(isNaN(t))throw new Error(t+" must be a number");if(t>C)throw _("cannot encode time greater than "+C);if(t<0)throw _("time must be positive");if(Number.isInteger(t)===!1)throw _("time must be an integer");for(var o=void 0,i="";e>0;e--)o=t%m,i=E.charAt(o)+i,t=(t-o)/m;return i}function oe(t,e){for(var o="";t>0;t--)o=ne(e)+o;return o}function ae(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=arguments[1];e||(e=typeof window<"u"?window:null);var o=e&&(e.crypto||e.msCrypto);if(o)return function(){var r=new Uint8Array(1);return o.getRandomValues(r),r[0]/255};try{var i=require("crypto");return function(){return i.randomBytes(1).readUInt8()/255}}catch{}if(t){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch{}return function(){return Math.random()}}throw _("secure crypto unusable, insecure Math.random not allowed")}function se(t){return t||(t=ae()),function(o){return isNaN(o)&&(o=Date.now()),re(o,ee)+oe(te,t)}}var ie=se();function le(t){let e,o,i;return{c(){e=g("textarea"),this.h()},l(r){e=b(r,"TEXTAREA",{class:!0}),v(e).forEach(f),this.h()},h(){N(e,"class","bg-amber-100 text-black shadow-lg border-2 text-center min-h-40 rounded-lg")},m(r,c){w(r,e,c),t[4](e),k(e,t[0].content),o||(i=[h(e,"input",t[5]),h(e,"keydown",y(t[2])),h(e,"dblclick",y(t[3])),h(e,"keypress",y(t[2]))],o=!0)},p(r,[c]){c&1&&k(e,r[0].content)},i:I,o:I,d(r){r&&f(e),t[4](null),o=!1,V(i)}}}function ce(t,e,o){const i=U();let{note:r}=e,c;function n(u){u.keyCode===8&&r.content.length===0&&(c.blur(),i("delete",r.id))}G(()=>{c.focus()});function s(u){$.call(this,t,u)}function a(u){J[u?"unshift":"push"](()=>{c=u,o(1,c)})}function l(){r.content=this.value,o(0,r)}return t.$$set=u=>{"note"in u&&o(0,r=u.note)},[r,c,n,s,a,l]}class ue extends T{constructor(e){super(),q(this,e,ce,le,R,{note:0})}}function D(t,e,o){const i=t.slice();return i[6]=e[o],i[7]=e,i[8]=o,i}function S(t){let e,o,i=A(t[0]),r=[];for(let n=0;n<i.length;n+=1)r[n]=O(D(t,i,n));const c=n=>p(r[n],1,1,()=>{r[n]=null});return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=M()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=M()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);w(n,e,s),o=!0},p(n,s){if(s&5){i=A(n[0]);let a;for(a=0;a<i.length;a+=1){const l=D(n,i,a);r[a]?(r[a].p(l,s),d(r[a],1)):(r[a]=O(l),r[a].c(),d(r[a],1),r[a].m(e.parentNode,e))}for(K(),a=i.length;a<r.length;a+=1)c(a);B()}},i(n){if(!o){for(let s=0;s<i.length;s+=1)d(r[s]);o=!0}},o(n){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)p(r[s]);o=!1},d(n){n&&f(e),j(r,n)}}}function O(t){let e,o,i,r,c;function n(a){t[3](a,t[6],t[7],t[8])}let s={};return t[6]!==void 0&&(s.note=t[6]),o=new ue({props:s}),J.push(()=>W(o,"note",n)),o.$on("delete",t[4]),{c(){e=g("div"),Y(o.$$.fragment),r=F(),this.h()},l(a){e=b(a,"DIV",{class:!0});var l=v(e);Z(o.$$.fragment,l),r=H(l),l.forEach(f),this.h()},h(){N(e,"class","mx-auto")},m(a,l){w(a,e,l),z(o,e,null),L(e,r),c=!0},p(a,l){t=a;const u={};!i&&l&1&&(i=!0,u.note=t[6],Q(()=>i=!1)),o.$set(u)},i(a){c||(d(o.$$.fragment,a),c=!0)},o(a){p(o.$$.fragment,a),c=!1},d(a){a&&f(e),x(o)}}}function fe(t){let e,o,i,r,c,n=t[0]&&S(t);return{c(){e=g("div"),o=g("div"),n&&n.c(),this.h()},l(s){e=b(s,"DIV",{class:!0});var a=v(e);o=b(a,"DIV",{class:!0});var l=v(o);n&&n.l(l),l.forEach(f),a.forEach(f),this.h()},h(){N(o,"class","flex flex-row-reverse flex-wrap-reverse"),N(e,"class","w-screen min-h-screen p-8 select-none bg-red-100")},m(s,a){w(s,e,a),L(e,o),n&&n.m(o,null),i=!0,r||(c=[h(window,"keydown",t[1]),h(e,"dblclick",t[1])],r=!0)},p(s,[a]){s[0]?n?(n.p(s,a),a&1&&d(n,1)):(n=S(s),n.c(),d(n,1),n.m(o,null)):n&&(K(),p(n,1,1,()=>{n=null}),B())},i(s){i||(d(n),i=!0)},o(s){p(n),i=!1},d(s){s&&f(e),n&&n.d(),r=!1,V(c)}}}function de(t,e,o){G(()=>{const l=localStorage.getItem("notes");o(0,n=l?JSON.parse(l):[])});function i(l){l.keyCode!==8&&o(0,n=[...n,{id:ie(),content:""}])}function r(l){o(0,n=n.filter(u=>u.id!==l))}function c(){n&&localStorage.setItem("notes",JSON.stringify(n))}let n;function s(l,u,X,P){X[P]=l,o(0,n)}const a=l=>r(l.detail);return t.$$.update=()=>{t.$$.dirty&1&&c()},[n,i,r,s,a]}class pe extends T{constructor(e){super(),q(this,e,de,fe,R,{})}}export{pe as component};
