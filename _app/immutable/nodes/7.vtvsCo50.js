import{r as j,s as $,e as N,c as E,j as K,f as w,k as b,i as I,m as P,o as v,I as q,n as U,J as ae,u as ee,K as ie,E as te,a as F,h as le,b as Q,g as ce,l as S,B as T,L as ue}from"../chunks/scheduler.bxoOVpJS.js";import{a as C,t as k,S as ne,i as oe,c as se,g as re,f as fe,b as de,d as he,m as me,e as _e}from"../chunks/index.7me9d-2N.js";function W(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function pe(t,e){C(t,1,1,()=>{e.delete(t.key)})}function ge(t,e,s,r,i,l,d,n,o,f,c,a){let u=t.length,h=l.length,_=u;const y={};for(;_--;)y[t[_].key]=_;const A=[],O=new Map,R=new Map,G=[];for(_=h;_--;){const m=a(i,l,_),p=s(m);let g=d.get(p);g?r&&G.push(()=>g.p(m,e)):(g=f(p,m),g.c()),O.set(p,A[_]=g),p in y&&R.set(p,Math.abs(_-y[p]))}const H=new Set,X=new Set;function V(m){k(m,1),m.m(n,c),d.set(m.key,m),c=m.first,h--}for(;u&&h;){const m=A[h-1],p=t[u-1],g=m.key,D=p.key;m===p?(c=m.first,u--,h--):O.has(D)?!d.has(g)||H.has(g)?V(m):X.has(D)?u--:R.get(g)>R.get(D)?(X.add(g),V(m)):(H.add(D),u--):(o(p,d),u--)}for(;u--;){const m=t[u];O.has(m.key)||o(m,d)}for(;h;)V(A[h-1]);return j(G),A}function L(t){var e=new Error(t);return e.source="ulid",e}var B="0123456789ABCDEFGHJKMNPQRSTVWXYZ",M=B.length,Y=Math.pow(2,48)-1,we=10,be=16;function ye(t){var e=Math.floor(t()*M);return e===M&&(e=M-1),B.charAt(e)}function ve(t,e){if(isNaN(t))throw new Error(t+" must be a number");if(t>Y)throw L("cannot encode time greater than "+Y);if(t<0)throw L("time must be positive");if(Number.isInteger(t)===!1)throw L("time must be an integer");for(var s=void 0,r="";e>0;e--)s=t%M,r=B.charAt(s)+r,t=(t-s)/M;return r}function ke(t,e){for(var s="";t>0;t--)s=ye(e)+s;return s}function Ne(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=arguments[1];e||(e=typeof window<"u"?window:null);var s=e&&(e.crypto||e.msCrypto);if(s)return function(){var i=new Uint8Array(1);return s.getRandomValues(i),i[0]/255};try{var r=require("crypto");return function(){return r.randomBytes(1).readUInt8()/255}}catch{}if(t){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch{}return function(){return Math.random()}}throw L("secure crypto unusable, insecure Math.random not allowed")}function Ee(t){return t||(t=Ne()),function(s){return isNaN(s)&&(s=Date.now()),ve(s,we)+ke(be,t)}}var J=Ee();function Me(t){let e,s,r;return{c(){e=N("textarea"),this.h()},l(i){e=E(i,"TEXTAREA",{placeholder:!0,class:!0}),K(e).forEach(w),this.h()},h(){b(e,"placeholder","Add a note..."),b(e,"class","bg-amber-100 text-black shadow-lg border-2 min-h-40 w-80 rounded-lg my-2 mx-2")},m(i,l){I(i,e,l),t[5](e),P(e,t[0].content),s||(r=[v(e,"input",t[6]),v(e,"keydown",q(t[2])),v(e,"dblclick",q(t[4])),v(e,"keypress",q(t[2]))],s=!0)},p(i,[l]){l&1&&P(e,i[0].content)},i:U,o:U,d(i){i&&w(e),t[5](null),s=!1,j(r)}}}function Ie(t,e,s){const r=ae();let{note:i=""}=e,{autofocus:l=!1}=e,d;function n(a){a.keyCode===8&&i.content.length===0&&(d.blur(),r("delete",i.id))}ee(()=>{l&&d.focus()});function o(a){ie.call(this,t,a)}function f(a){te[a?"unshift":"push"](()=>{d=a,s(1,d)})}function c(){i.content=this.value,s(0,i)}return t.$$set=a=>{"note"in a&&s(0,i=a.note),"autofocus"in a&&s(3,l=a.autofocus)},[i,d,n,l,o,f,c]}class Ce extends ne{constructor(e){super(),oe(this,e,Ie,Me,$,{note:0,autofocus:3})}}function Z(t,e,s){const r=t.slice();return r[7]=e[s],r[8]=e,r[9]=s,r}function x(t){let e=[],s=new Map,r,i,l=W(t[0]);const d=n=>n[7].id;for(let n=0;n<l.length;n+=1){let o=Z(t,l,n),f=d(o);s.set(f,e[n]=z(f,o))}return{c(){for(let n=0;n<e.length;n+=1)e[n].c();r=T()},l(n){for(let o=0;o<e.length;o+=1)e[o].l(n);r=T()},m(n,o){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(n,o);I(n,r,o),i=!0},p(n,o){o&11&&(l=W(n[0]),re(),e=ge(e,o,d,1,n,l,s,r.parentNode,pe,z,r,Z),se())},i(n){if(!i){for(let o=0;o<l.length;o+=1)k(e[o]);i=!0}},o(n){for(let o=0;o<e.length;o+=1)C(e[o]);i=!1},d(n){n&&w(r);for(let o=0;o<e.length;o+=1)e[o].d(n)}}}function z(t,e){let s,r,i,l;function d(o){e[4](o,e[7],e[8],e[9])}let n={autofocus:e[7].id===e[1]};return e[7]!==void 0&&(n.note=e[7]),r=new Ce({props:n}),te.push(()=>fe(r,"note",d)),r.$on("delete",e[5]),{key:t,first:null,c(){s=T(),de(r.$$.fragment),this.h()},l(o){s=T(),he(r.$$.fragment,o),this.h()},h(){this.first=s},m(o,f){I(o,s,f),me(r,o,f),l=!0},p(o,f){e=o;const c={};f&3&&(c.autofocus=e[7].id===e[1]),!i&&f&1&&(i=!0,c.note=e[7],ue(()=>i=!1)),r.$set(c)},i(o){l||(k(r.$$.fragment,o),l=!0)},o(o){C(r.$$.fragment,o),l=!1},d(o){o&&w(s),_e(r,o)}}}function Ae(t){let e,s,r,i,l='<span class="mx-auto italic leading-8 text-black text-6xl font-comic-sans drop-shadow-[0_1.2px_1.2px_rgba(0,0,0,0.8)]">wotisay</span>',d,n,o,f,c,a=t[0]&&x(t);return{c(){e=N("link"),s=F(),r=N("div"),i=N("div"),i.innerHTML=l,d=F(),n=N("div"),a&&a.c(),this.h()},l(u){const h=le("svelte-1d0jqb7",document.head);e=E(h,"LINK",{rel:!0,href:!0}),h.forEach(w),s=Q(u),r=E(u,"DIV",{class:!0});var _=K(r);i=E(_,"DIV",{class:!0,"data-svelte-h":!0}),ce(i)!=="svelte-1c8nqhw"&&(i.innerHTML=l),d=Q(_),n=E(_,"DIV",{class:!0});var y=K(n);a&&a.l(y),y.forEach(w),_.forEach(w),this.h()},h(){b(e,"rel","manifest"),b(e,"href","/wotisay-manifest.json"),b(i,"class","w-100 text-center p-8 rotate-6 transition ease-in-out delay-150 hover:-rotate-6"),b(n,"class","sm:rows-2 md:rows-3 lg:rows-4 xl:rows-5 text-center"),b(r,"class","w-screen min-h-screen select-none bg-red-100")},m(u,h){S(document.head,e),I(u,s,h),I(u,r,h),S(r,i),S(r,d),S(r,n),a&&a.m(n,null),o=!0,f||(c=[v(window,"keydown",t[2]),v(r,"dblclick",t[2])],f=!0)},p(u,[h]){u[0]?a?(a.p(u,h),h&1&&k(a,1)):(a=x(u),a.c(),k(a,1),a.m(n,null)):a&&(re(),C(a,1,1,()=>{a=null}),se())},i(u){o||(k(a),o=!0)},o(u){C(a),o=!1},d(u){u&&(w(s),w(r)),w(e),a&&a.d(),f=!1,j(c)}}}function De(t,e,s){let r="";ee(()=>{const c=localStorage.getItem("notes");if(s(0,n=c?JSON.parse(c):[]),n.length===0||n.length>0&&n[0].content!==""){const a=J();s(0,n=[{id:a,content:""},...n])}});function i(c){if(c.keyCode===8)return;const a=J();s(1,r=a),s(0,n=[{id:a,content:""},...n])}function l(c){s(0,n=n.filter(a=>a.id!==c))}function d(){if(n){if(n.length===0||n.length>0&&n[0].content!==""){const c=J();s(0,n=[{id:c,content:""},...n])}localStorage.setItem("notes",JSON.stringify(n))}}let n;function o(c,a,u,h){u[h]=c,s(0,n)}const f=c=>l(c.detail);return t.$$.update=()=>{t.$$.dirty&1&&d()},[n,r,i,l,o,f]}class Te extends ne{constructor(e){super(),oe(this,e,De,Ae,$,{})}}export{Te as component};
