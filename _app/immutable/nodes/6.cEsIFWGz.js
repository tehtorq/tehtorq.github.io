import{r as J,s as x,e as I,c as A,h as G,f as w,j as v,i as S,l as P,m as b,G as V,n as U,I as se,q as z,J as re,D as $,a as ae,g as ie,b as le,k as q,A as D,K as ce}from"../chunks/scheduler.S5f2EV9a.js";import{a as N,t as y,S as ee,i as te,c as ne,g as oe,f as ue,b as fe,d as de,m as he,e as me}from"../chunks/index.RCc_LvUI.js";function j(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function _e(t,e){N(t,1,1,()=>{e.delete(t.key)})}function pe(t,e,n,r,i,l,f,s,o,a,c,u){let h=t.length,p=l.length,g=h;const T={};for(;g--;)T[t[g].key]=g;const E=[],L=new Map,O=new Map,K=[];for(g=p;g--;){const d=u(i,l,g),m=n(d);let _=f.get(m);_?r&&K.push(()=>_.p(d,e)):(_=a(m,d),_.c()),L.set(m,E[g]=_),m in T&&O.set(m,Math.abs(g-T[m]))}const X=new Set,B=new Set;function R(d){y(d,1),d.m(s,c),f.set(d.key,d),c=d.first,p--}for(;h&&p;){const d=E[p-1],m=t[h-1],_=d.key,M=m.key;d===m?(c=d.first,h--,p--):L.has(M)?!f.has(_)||X.has(_)?R(d):B.has(M)?h--:O.get(_)>O.get(M)?(B.add(_),R(d)):(X.add(M),h--):(o(m,f),h--)}for(;h--;){const d=t[h];L.has(d.key)||o(d,f)}for(;p;)R(E[p-1]);return J(K),E}function C(t){var e=new Error(t);return e.source="ulid",e}var H="0123456789ABCDEFGHJKMNPQRSTVWXYZ",k=H.length,F=Math.pow(2,48)-1,ge=10,we=16;function be(t){var e=Math.floor(t()*k);return e===k&&(e=k-1),H.charAt(e)}function ye(t,e){if(isNaN(t))throw new Error(t+" must be a number");if(t>F)throw C("cannot encode time greater than "+F);if(t<0)throw C("time must be positive");if(Number.isInteger(t)===!1)throw C("time must be an integer");for(var n=void 0,r="";e>0;e--)n=t%k,r=H.charAt(n)+r,t=(t-n)/k;return r}function ve(t,e){for(var n="";t>0;t--)n=be(e)+n;return n}function ke(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=arguments[1];e||(e=typeof window<"u"?window:null);var n=e&&(e.crypto||e.msCrypto);if(n)return function(){var i=new Uint8Array(1);return n.getRandomValues(i),i[0]/255};try{var r=require("crypto");return function(){return r.randomBytes(1).readUInt8()/255}}catch{}if(t){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch{}return function(){return Math.random()}}throw C("secure crypto unusable, insecure Math.random not allowed")}function Ne(t){return t||(t=ke()),function(n){return isNaN(n)&&(n=Date.now()),ye(n,ge)+ve(we,t)}}var Q=Ne();function Ee(t){let e,n,r;return{c(){e=I("textarea"),this.h()},l(i){e=A(i,"TEXTAREA",{placeholder:!0,class:!0}),G(e).forEach(w),this.h()},h(){v(e,"placeholder","Add a note..."),v(e,"class","bg-amber-100 text-black shadow-lg border-2 min-h-40 w-80 rounded-lg my-2 mx-2")},m(i,l){S(i,e,l),t[5](e),P(e,t[0].content),n||(r=[b(e,"input",t[6]),b(e,"keydown",V(t[2])),b(e,"dblclick",V(t[4])),b(e,"keypress",V(t[2]))],n=!0)},p(i,[l]){l&1&&P(e,i[0].content)},i:U,o:U,d(i){i&&w(e),t[5](null),n=!1,J(r)}}}function Me(t,e,n){const r=se();let{note:i=""}=e,{autofocus:l=!1}=e,f;function s(u){u.keyCode===8&&i.content.length===0&&(f.blur(),r("delete",i.id))}z(()=>{l&&f.focus()});function o(u){re.call(this,t,u)}function a(u){$[u?"unshift":"push"](()=>{f=u,n(1,f)})}function c(){i.content=this.value,n(0,i)}return t.$$set=u=>{"note"in u&&n(0,i=u.note),"autofocus"in u&&n(3,l=u.autofocus)},[i,f,s,l,o,a,c]}class Ie extends ee{constructor(e){super(),te(this,e,Me,Ee,x,{note:0,autofocus:3})}}function W(t,e,n){const r=t.slice();return r[7]=e[n],r[8]=e,r[9]=n,r}function Y(t){let e=[],n=new Map,r,i,l=j(t[0]);const f=s=>s[7].id;for(let s=0;s<l.length;s+=1){let o=W(t,l,s),a=f(o);n.set(a,e[s]=Z(a,o))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();r=D()},l(s){for(let o=0;o<e.length;o+=1)e[o].l(s);r=D()},m(s,o){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(s,o);S(s,r,o),i=!0},p(s,o){o&11&&(l=j(s[0]),oe(),e=pe(e,o,f,1,s,l,n,r.parentNode,_e,Z,r,W),ne())},i(s){if(!i){for(let o=0;o<l.length;o+=1)y(e[o]);i=!0}},o(s){for(let o=0;o<e.length;o+=1)N(e[o]);i=!1},d(s){s&&w(r);for(let o=0;o<e.length;o+=1)e[o].d(s)}}}function Z(t,e){let n,r,i,l;function f(o){e[4](o,e[7],e[8],e[9])}let s={autofocus:e[7].id===e[1]};return e[7]!==void 0&&(s.note=e[7]),r=new Ie({props:s}),$.push(()=>ue(r,"note",f)),r.$on("delete",e[5]),{key:t,first:null,c(){n=D(),fe(r.$$.fragment),this.h()},l(o){n=D(),de(r.$$.fragment,o),this.h()},h(){this.first=n},m(o,a){S(o,n,a),he(r,o,a),l=!0},p(o,a){e=o;const c={};a&3&&(c.autofocus=e[7].id===e[1]),!i&&a&1&&(i=!0,c.note=e[7],ce(()=>i=!1)),r.$set(c)},i(o){l||(y(r.$$.fragment,o),l=!0)},o(o){N(r.$$.fragment,o),l=!1},d(o){o&&w(n),me(r,o)}}}function Ae(t){let e,n,r='<span class="mx-auto italic leading-8 text-black text-6xl font-comic-sans drop-shadow-[0_1.2px_1.2px_rgba(0,0,0,0.8)]">wotisay</span>',i,l,f,s,o,a=t[0]&&Y(t);return{c(){e=I("div"),n=I("div"),n.innerHTML=r,i=ae(),l=I("div"),a&&a.c(),this.h()},l(c){e=A(c,"DIV",{class:!0});var u=G(e);n=A(u,"DIV",{class:!0,"data-svelte-h":!0}),ie(n)!=="svelte-1c8nqhw"&&(n.innerHTML=r),i=le(u),l=A(u,"DIV",{class:!0});var h=G(l);a&&a.l(h),h.forEach(w),u.forEach(w),this.h()},h(){v(n,"class","w-100 text-center p-8 rotate-6 transition ease-in-out delay-150 hover:-rotate-6"),v(l,"class","sm:rows-2 md:rows-3 lg:rows-4 xl:rows-5 text-center"),v(e,"class","w-screen min-h-screen select-none bg-red-100")},m(c,u){S(c,e,u),q(e,n),q(e,i),q(e,l),a&&a.m(l,null),f=!0,s||(o=[b(window,"keydown",t[2]),b(e,"dblclick",t[2])],s=!0)},p(c,[u]){c[0]?a?(a.p(c,u),u&1&&y(a,1)):(a=Y(c),a.c(),y(a,1),a.m(l,null)):a&&(oe(),N(a,1,1,()=>{a=null}),ne())},i(c){f||(y(a),f=!0)},o(c){N(a),f=!1},d(c){c&&w(e),a&&a.d(),s=!1,J(o)}}}function Ce(t,e,n){let r="";z(()=>{const c=localStorage.getItem("notes");if(n(0,s=c?JSON.parse(c):[]),s.length===0||s.length>0&&s[0].content!==""){const u=Q();n(0,s=[{id:u,content:""},...s])}});function i(c){if(c.keyCode===8)return;const u=Q();n(1,r=u),n(0,s=[{id:u,content:""},...s])}function l(c){n(0,s=s.filter(u=>u.id!==c))}function f(){s&&localStorage.setItem("notes",JSON.stringify(s))}let s;function o(c,u,h,p){h[p]=c,n(0,s)}const a=c=>l(c.detail);return t.$$.update=()=>{t.$$.dirty&1&&f()},[s,r,i,l,o,a]}class Te extends ee{constructor(e){super(),te(this,e,Ce,Ae,x,{})}}export{Te as component};
